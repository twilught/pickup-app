<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pickup App Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #050816;
      --bg-soft: #0f172a;
      --card: #020617;
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.15);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --danger: #f97373;
      --warning: #f59e0b;
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
      color: var(--text);
      background: radial-gradient(circle at top, #1e293b 0, #020617 45%, #020617 100%);
      display: flex;
      align-items: stretch;
      justify-content: center;
    }
    .shell {
      width: 100%;
      max-width: 1200px;
      padding: 24px;
    }
    .card {
      border-radius: 24px;
      background: linear-gradient(135deg, rgba(15,23,42,0.95), rgba(15,23,42,0.8));
      border: 1px solid rgba(148,163,184,0.25);
      box-shadow:
        0 20px 40px rgba(15,23,42,0.8),
        0 0 0 1px rgba(15,23,42,0.9);
      backdrop-filter: blur(18px);
    }
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 20px;
    }
    header .title-area {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .logo-pill {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: radial-gradient(circle at 0% 0%, #4ade80, #22c55e, #16a34a);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ecfdf5;
      font-weight: 700;
      font-size: 18px;
      box-shadow:
        0 10px 25px rgba(22,163,74,0.5),
        0 0 0 1px rgba(22,163,74,0.8);
    }
    h1 {
      font-size: 22px;
      margin: 0;
      letter-spacing: 0.03em;
    }
    .subtitle {
      font-size: 13px;
      color: var(--muted);
    }
    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .pill {
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px solid rgba(148,163,184,0.35);
      background: radial-gradient(circle at 0 0, rgba(34,197,94,0.12), rgba(15,23,42,0.9));
      color: var(--muted);
    }
    .pill span.dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 999px;
      margin-right: 6px;
      background: #22c55e;
      box-shadow: 0 0 12px rgba(34,197,94,0.8);
    }
    main {
      padding: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: 2fr 1.4fr;
      gap: 18px;
    }
    @media (max-width: 900px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }
    .metrics {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      margin-bottom: 16px;
    }
    @media (max-width: 700px) {
      .metrics {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
    .metric-card {
      border-radius: 18px;
      background: radial-gradient(circle at top, rgba(34,197,94,0.11), rgba(15,23,42,0.95));
      border: 1px solid rgba(34,197,94,0.35);
      padding: 12px 14px;
    }
    .metric-label {
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 4px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }
    .metric-value {
      font-size: 22px;
      font-weight: 600;
    }
    .metric-chip {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(34,197,94,0.5);
      color: #bbf7d0;
      background: rgba(21,128,61,0.3);
      margin-top: 4px;
      display: inline-block;
    }
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      gap: 10px;
    }
    .section-header h2 {
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
      margin: 0;
    }
    .section-header button {
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.4);
      background: rgba(15,23,42,0.9);
      color: var(--muted);
      font-size: 11px;
      padding: 6px 10px;
      cursor: pointer;
    }
    .section-header button span {
      opacity: 0.7;
      margin-right: 4px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      border-spacing: 0;
      font-size: 13px;
    }
    thead {
      background: rgba(15,23,42,0.9);
    }
    th, td {
      padding: 8px 10px;
      text-align: left;
    }
    th {
      font-weight: 500;
      color: var(--muted);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      border-bottom: 1px solid rgba(31,41,55,0.9);
    }
    tbody tr {
      border-bottom: 1px solid rgba(31,41,55,0.8);
    }
    tbody tr:last-child {
      border-bottom: none;
    }
    tbody tr:hover {
      background: radial-gradient(circle at left, rgba(34,197,94,0.12), rgba(15,23,42,0.95));
    }
    .status-badge {
      padding: 2px 10px;
      border-radius: 999px;
      font-size: 11px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .status-badge span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
    }
    .status-ok {
      background: rgba(22,163,74,0.2);
      color: #bbf7d0;
    }
    .status-ok span.dot {
      background: #22c55e;
      box-shadow: 0 0 10px rgba(22,163,74,0.9);
    }
    .status-warn {
      background: rgba(245,158,11,0.2);
      color: #fed7aa;
    }
    .status-warn span.dot {
      background: #f59e0b;
      box-shadow: 0 0 10px rgba(245,158,11,0.8);
    }
    .status-down {
      background: rgba(239,68,68,0.2);
      color: #fecaca;
    }
    .status-down span.dot {
      background: #ef4444;
      box-shadow: 0 0 10px rgba(239,68,68,0.8);
    }
    .tag {
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      border: 1px solid rgba(148,163,184,0.35);
      color: var(--muted);
    }
    .right-panel {
      border-radius: 20px;
      border: 1px solid rgba(148,163,184,0.4);
      background:
        radial-gradient(circle at 0 0, rgba(56,189,248,0.18), rgba(15,23,42,0.95)),
        linear-gradient(135deg, rgba(15,23,42,0.95), rgba(15,23,42,0.9));
      padding: 14px 16px;
    }
    .right-panel h3 {
      font-size: 14px;
      margin: 0 0 10px 0;
    }
    .env-list {
      list-style: none;
      margin: 0;
      padding: 0;
      font-size: 12px;
    }
    .env-list li {
      padding: 5px 0;
      border-bottom: 1px dashed rgba(30,64,175,0.9);
      display: flex;
      justify-content: space-between;
      gap: 8px;
    }
    .env-list li:last-child {
      border-bottom: none;
    }
    .env-key {
      color: var(--muted);
    }
    .env-value {
      font-family: "SF Mono", ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
    }
    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin: 8px 0 4px;
    }
    .chip {
      padding: 3px 9px;
      border-radius: 999px;
      font-size: 11px;
      border: 1px solid rgba(148,163,184,0.45);
      background: rgba(15,23,42,0.9);
      color: var(--muted);
    }
    .footer {
      margin-top: 14px;
      font-size: 11px;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
    }
    .badge-ok {
      font-size: 11px;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(34,197,94,0.6);
      background: rgba(21,128,61,0.4);
      color: #bbf7d0;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .badge-ok span {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 10px rgba(16,185,129,0.9);
    }
    .small {
      font-size: 11px;
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="card">
      <header>
        <div class="title-area">
          <div class="logo-pill">PU</div>
          <div>
            <h1>Pickup App · CI Dashboard</h1>
            <div class="subtitle">Docker · Jenkins · Node · Postgres</div>
          </div>
        </div>
        <div class="pill-row">
          <div class="pill"><span class="dot"></span> Live on localhost</div>
          <div class="pill">Compose: <strong>pickup-app-pipeline</strong></div>
        </div>
      </header>
      <main>
        <div class="grid">
          <section>
            <div class="metrics">
              <div class="metric-card">
                <div class="metric-label">Services</div>
                <div class="metric-value" id="svc-count">—</div>
                <div class="metric-chip" id="svc-chip">Checking...</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">API Status</div>
                <div class="metric-value small" id="api-status-label">Unknown</div>
                <div class="metric-chip" id="api-status-chip">Waiting for health...</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Last Health Check</div>
                <div class="metric-value small" id="health-time">—</div>
                <div class="metric-chip">Auto by Jenkins</div>
              </div>
            </div>

            <div class="section-header">
              <h2>Services & Ports</h2>
              <button type="button" id="refresh-btn"><span>⟳</span>Refresh</button>
            </div>
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>Service</th>
                    <th>Status</th>
                    <th>Port</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody id="services-body">
                  <tr>
                    <td colspan="4" style="text-align:center; padding:12px 0; color: var(--muted);">
                      Loading services...
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </section>

          <aside class="right-panel">
            <h3>Environment snapshot</h3>
            <p class="small" style="margin:0 0 6px;">Values below come from your <code>.env</code> file in Jenkins.</p>
            <ul class="env-list">
              <li><span class="env-key">POSTGRES_USER</span><span class="env-value">&lt;hidden&gt;</span></li>
              <li><span class="env-key">POSTGRES_DB</span><span class="env-value">&lt;hidden&gt;</span></li>
              <li><span class="env-key">DATABASE_URL</span><span class="env-value">postgres://...</span></li>
              <li><span class="env-key">API_PORT</span><span class="env-value">4000</span></li>
            </ul>
            <div class="chip-row">
              <span class="chip">docker compose up -d</span>
              <span class="chip">Health: <code>/health</code></span>
              <span class="chip">API: <code>/services</code></span>
            </div>
            <div class="footer">
              <div class="badge-ok"><span></span> Healthy in last run</div>
              <div>Controlled by <strong>Jenkinsfile</strong></div>
            </div>
          </aside>
        </div>
      </main>
    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>
